 <!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="Sherlock Cluster documentation"><link rel="canonical" href="https://www.sherlock.stanford.edu/docs/storage/data-sharing/"><meta name="author" content="Kilian Cavalotti"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\_\-\.]+"><link rel="shortcut icon" href="../../../img/logo_small.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>Data sharing - Sherlock</title><link rel="stylesheet" href="../../../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../../../assets/stylesheets/application-palette.fe74ad26.css"><meta name="theme-color" content=""><script src="../../../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=swap"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../../../assets/fonts/material-icons.css"><link rel="manifest" href="../../../manifest.webmanifest"><link rel="stylesheet" href="../../.."><script>window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-68034405-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body dir="ltr" data-md-color-primary="stanford" data-md-color-accent="stanford"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#sharing-data-locally-on-sherlock" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://www.sherlock.stanford.edu/" title="Sherlock" class="md-header-nav__button md-logo"><img src="../../../img/logo_small.png" width="24" height="24"></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">Sherlock</span><span class="md-header-nav__topic">Data sharing</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/stanford-rc/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">SRCC <i class="fa fa-heart-o"></i> Open Source</div></a></div></div></div></nav></header><div class="md-container"><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://www.sherlock.stanford.edu/" title="Sherlock" class="md-nav__button md-logo"><img src="../../../img/logo_small.png" width="48" height="48"></a>Sherlock</label><div class="md-nav__source"><a href="https://github.com/stanford-rc/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">SRCC <i class="fa fa-heart-o"></i> Open Source</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1"><label class="md-nav__link" for="nav-1">Overview</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-1">Overview</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../overview/introduction/" title="Introduction" class="md-nav__link">Introduction</a></li><li class="md-nav__item"><a href="../../overview/concepts/" title="Concepts" class="md-nav__link">Concepts</a></li><li class="md-nav__item"><a href="../../overview/glossary/" title="Glossary" class="md-nav__link">Glossary</a></li><li class="md-nav__item"><a href="../../overview/specs/" title="Tech specs" class="md-nav__link">Tech specs</a></li><li class="md-nav__item"><a href="../../overview/status/" title="Status" class="md-nav__link">Status</a></li><li class="md-nav__item"><a href="../../overview/about/" title="About" class="md-nav__link">About</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2"><label class="md-nav__link" for="nav-2">Getting Started</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">Getting Started</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../getting-started/prerequisites/" title="Prerequisites" class="md-nav__link">Prerequisites</a></li><li class="md-nav__item"><a href="../../getting-started/connecting/" title="Connecting" class="md-nav__link">Connecting</a></li><li class="md-nav__item"><a href="../../getting-started/submitting/" title="Submitting jobs" class="md-nav__link">Submitting jobs</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"><label class="md-nav__link" for="nav-3">User guide</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">User guide</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../user-guide/running-jobs/" title="Running jobs" class="md-nav__link">Running jobs</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2"><label class="md-nav__link" for="nav-3-2">Specialized resources</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-3-2">Specialized resources</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../user-guide/gpu/" title="GPU nodes" class="md-nav__link">GPU nodes</a></li></ul></nav></li><li class="md-nav__item"><a href="../../user-guide/ondemand/" title="OnDemand" class="md-nav__link">OnDemand</a></li><li class="md-nav__item"><a href="../../user-guide/troubleshoot/" title="Troubleshooting" class="md-nav__link">Troubleshooting</a></li></ul></nav></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked><label class="md-nav__link" for="nav-4">Storage</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">Storage</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../filesystems/" title="Filesystems" class="md-nav__link">Filesystems</a></li><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">Data sharing</label><a href="./" title="Data sharing" class="md-nav__link md-nav__link--active">Data sharing</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#sharing-data-locally-on-sherlock" title="Sharing data locally on Sherlock" class="md-nav__link">Sharing data locally on Sherlock</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#traditional-unix-permissions" title="Traditional Unix permissions" class="md-nav__link">Traditional Unix permissions</a></li><li class="md-nav__item"><a href="#posix-acls" title="POSIX ACLs" class="md-nav__link">POSIX ACLs</a></li><li class="md-nav__item"><a href="#nfsv4-acls" title="NFSv4 ACLs" class="md-nav__link">NFSv4 ACLs</a></li></ul></nav></li><li class="md-nav__item"><a href="#sharing-data-outside-of-sherlock" title="Sharing data outside of Sherlock" class="md-nav__link">Sharing data outside of Sherlock</a></li></ul></nav></li><li class="md-nav__item"><a href="../data-protection/" title="Data protection" class="md-nav__link">Data protection</a></li><li class="md-nav__item"><a href="../data-transfer/" title="Data transfer" class="md-nav__link">Data transfer</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5"><label class="md-nav__link" for="nav-5">Software</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">Software</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../software/overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../../software/list/" title="List" class="md-nav__link">List</a></li><li class="md-nav__item"><a href="../../software/modules/" title="Modules" class="md-nav__link">Modules</a></li><li class="md-nav__item"><a href="../../software/install/" title="Installation" class="md-nav__link">Installation</a></li><li class="md-nav__item"><a href="../../software/containers/" title="Containers" class="md-nav__link">Containers</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6" type="checkbox" id="nav-5-6"><label class="md-nav__link" for="nav-5-6">Usage</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-5-6">Usage</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../software/using/R/" title="R" class="md-nav__link">R</a></li><li class="md-nav__item"><a href="../../software/using/julia/" title="Julia" class="md-nav__link">Julia</a></li><li class="md-nav__item"><a href="../../software/using/python/" title="Python" class="md-nav__link">Python</a></li><li class="md-nav__item"><a href="../../software/using/perl/" title="Perl" class="md-nav__link">Perl</a></li><li class="md-nav__item"><a href="../../software/using/spark/" title="Spark" class="md-nav__link">Spark</a></li><li class="md-nav__item"><a href="../../software/using/mariadb/" title="MariaDB" class="md-nav__link">MariaDB</a></li><li class="md-nav__item"><a href="../../software/using/postgresql/" title="PostgreSQL" class="md-nav__link">PostgreSQL</a></li><li class="md-nav__item"><a href="../../software/using/singularity/" title="Singularity" class="md-nav__link">Singularity</a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6"><label class="md-nav__link" for="nav-6">Advanced topics</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">Advanced topics</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../advanced-topics/connection/" title="Connection" class="md-nav__link">Connection</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#sharing-data-locally-on-sherlock" title="Sharing data locally on Sherlock" class="md-nav__link">Sharing data locally on Sherlock</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#traditional-unix-permissions" title="Traditional Unix permissions" class="md-nav__link">Traditional Unix permissions</a></li><li class="md-nav__item"><a href="#posix-acls" title="POSIX ACLs" class="md-nav__link">POSIX ACLs</a></li><li class="md-nav__item"><a href="#nfsv4-acls" title="NFSv4 ACLs" class="md-nav__link">NFSv4 ACLs</a></li></ul></nav></li><li class="md-nav__item"><a href="#sharing-data-outside-of-sherlock" title="Sharing data outside of Sherlock" class="md-nav__link">Sharing data outside of Sherlock</a></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/stanford-rc/www.sherlock.stanford.edu/edit/docs/src/docs/storage/data-sharing.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a><h1>Data sharing</h1><p>The following sections present and detail options to share data across users
and groups on Sherlock.</p>
<h2 id="sharing-data-locally-on-sherlock">Sharing data locally on Sherlock<a class="headerlink" href="#sharing-data-locally-on-sherlock" title="Permanent link">#</a></h2>
<h3 id="traditional-unix-permissions">Traditional Unix permissions<a class="headerlink" href="#traditional-unix-permissions" title="Permanent link">#</a></h3>
<p>Standard <a href="https://en.wikipedia.org/wiki/File_system_permissions">Unix file permissions</a> are supported on Sherlock and
provide <strong>read</strong>, <strong>write</strong> and <strong>execute</strong> permissions for the three distinct
access classes.</p>
<p>The access classes are defined as follows:</p>
<ul>
<li>Files and directories are owned by a user. The owner determines the file's
  <em>user class</em>. Distinct permissions apply to the owner.</li>
<li>Files and directories are assigned a group, which define the file's <em>group
  class</em>. Distinct permissions apply to members of the file's group. The owner
  may be a member of the file's group.</li>
<li>Users who are not the owner, nor a member of the group, comprise a file's
  <em>others class</em>. Distinct permissions apply to others.</li>
</ul>
<p>The following permissions apply to each class:</p>
<ul>
<li>The <code>read</code> permission grants the ability to read a file. When set for a
  directory, this permission grants the ability to read the names of files in
  the directory, but not to find out any further information about them such as
  contents, file type, size, ownership, permissions.</li>
<li>The <code>write</code> permission grants the ability to modify a file. When set for a
  directory, this permission grants the ability to modify entries in the
  directory. This includes creating files, deleting files, and renaming files.</li>
<li>The <code>execute</code> permission grants the ability to execute a file. This
  permission must be set for executable programs, including shell scripts, in
  order to allow the operating system to run them. When set for a directory,
  this permission grants the ability to access file contents and
  meta-information if its name is known, but not list files inside the
  directory, unless read is set also.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Shared directories traversal</p>
<p>If you need to give access to one of your files to another user, they will
at least need <em>execute</em> permission on each directory within the path to
that file.</p>
</div>
<p>The effective permissions are determined based on the first class the user
falls within in the order of <em>user</em>, <em>group</em> then <em>others</em>. For example, the
user who is the owner of the file will have the permissions given to the user
class regardless of the permissions assigned to the group class or others
class.</p>
<p>While traditional Unix permissions are sufficient in most cases to share files
with all the users within the same group, they are not enough to share files
with a specific subset of users, or with users from other groups. Access
Control Lists (ACLs) can be used for that purpose.</p>
<p>There are two type of ACLs supported on Sherlock depending on the underlying
filesystem:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Filesystems</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#nfsv4-acls">NFSv4 ACLs</a></td>
<td><code>$HOME</code> and <code>$GROUP_HOME</code></td>
</tr>
<tr>
<td><a href="#posix-acls">POSIX ACLs</a></td>
<td><code>$SCRATCH</code>, <code>$GROUP_SCRATCH</code>, <code>$L_SCRATCH</code> and <code>$OAK</code></td>
</tr>
</tbody>
</table>
<h3 id="posix-acls">POSIX ACLs<a class="headerlink" href="#posix-acls" title="Permanent link">#</a></h3>
<p>POSIX ACLs allows you to grant or deny access to files and directories for
different users (or groups), independently of the file owner or group.</p>
<p>Two types of POSIX ACLs can be defined:</p>
<ul>
<li><strong>Access ACLs</strong>: grant permission for a specific file or directory.</li>
<li><strong>Default ACLs</strong>: allow to set a default set of ACLs that will be applied to
  any file or directory without any already defined ACL. Can only be set on
  directories.</li>
</ul>
<p>ACLs are set with the <code>setfacl</code> command, and displayed with <code>getfacl</code>. For more
details and examples, please refer to <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Storage/2.0/html/Administration_Guide/ch09s05.html">this documentation</a>.</p>
<p>In the example below, we allow two users to access a restricted directory
located at <code>$GROUP_SCRATCH/restricted-dir/</code>:</p>
<div class="codehilite"><pre><span></span>$ cd $GROUP_SCRATCH

### Create new directory
$ mkdir restricted-dir

### Remove &#39;group&#39; and &#39;other&#39; access
$ chmod g-rwx,o-rwx restricted-dir

### Give user bob read and traversal permissions to the directory
$ setfacl -m u:bob:rX restricted-dir

### Use default ACLs (-d) to give user bob read access to all new
### files and sub-directories that will be created in &quot;restricted-dir&quot;
$ setfacl -d -m u:bob:rX restricted-dir

### Give user alice read, write and traversal permissions for the directory
$ setfacl -m u:alice:rwX restricted-dir

### Use default ACLs (-d) to give user alice read and write access to all
### new files and sub-directories
$ setfacl -d -m u:alice:rwX restricted-dir

### Show ACLs
$ getfacl restricted-dir
# file: restricted-dir/
# owner: joe
# group: grp
# flags: -s-
user::rwx
user:bob:r-x
group::---
mask::r-x
other::---
default:user::rwx
default:user:alice:rwx
default:user:bob:r-x
default:group::---
default:mask::rwx
default:other::---
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Default permissions on <code>$GROUP_SCRATCH</code> don't allow sharing outside of your group</p>
<p>By default, the Unix permissions on the root directory <code>$GROUP_SCRATCH</code>
don't allow read nor traversal access for <em>others</em> (<em>ie.</em> any user not part
of your PI group). If you need to share files with users outside of your
own group, please <a href="mailto:srcc-support@stanford.edu">contact us</a> so we can set the appropriate
permissions on your folder.</p>
</div>
<p>For <code>$SCRATCH</code>, you're the owner of the directory and so you can change the
permissions yourself.</p>
<h3 id="nfsv4-acls">NFSv4 ACLs<a class="headerlink" href="#nfsv4-acls" title="Permanent link">#</a></h3>
<p><code>$HOME</code> and <code>$GROUP_HOME</code> also allow setting ACLs, albeit with different
syntax and semantics than POSIX ACLs. The principle is very similar,
though.</p>
<p>An ACL in NFSv4 is a list of rules setting permissions on files or directories.
A permission rule, or Access Control Entry (ACE), is of the form
<code>type:flags:principle:permissions</code>.</p>
<p>Commonly used entries for these fields are:</p>
<ul>
<li><strong>type</strong>: <code>A</code> (allow) or <code>D</code> (deny)</li>
<li><strong>flags</strong>: <code>g</code> (group), <code>d</code> (directory-inherit), <code>f</code> (file-inherit), <code>n</code>
  (no-propagate-inherit), or <code>i</code> (inherit-only)</li>
<li><strong>principle</strong>:  a named user (<code>user@sherlock</code>), a group, or one of three
  special principles: <code>OWNER@</code>, <code>GROUP@</code>, and <code>EVERYONE@</code>.</li>
<li><strong>permissions</strong>: there are 14 permission characters, as well as the shortcuts
  <code>R</code>, <code>W</code>, and <code>X</code>. Here is a list of possible permissions that can be
  included in the permissions field (options are Case Sensitive)<small><ul>
<li><code>r</code> read-data (files) / list-directory (directories)</li>
<li><code>w</code> write-data (files) / create-file (directories)</li>
<li><code>x</code> execute (files) / change-directory (directories)</li>
<li><code>a</code> append-data (files) / create-subdirectory (directories)</li>
<li><code>t</code> read-attributes: read the attributes of the file/directory.</li>
<li><code>T</code> write-attributes: write the attributes of the file/directory.</li>
<li><code>n</code> read-named-attributes: read the named attributes of the
  file/directory.</li>
<li><code>N</code> write-named-attributes: write the named attributes of the
  file/directory.</li>
<li><code>c</code> read-ACL: read the file/directory NFSv4 ACL.</li>
<li><code>C</code> write-ACL: write the file/directory NFSv4 ACL.</li>
<li><code>o</code> write-owner: change ownership of the file/directory.</li>
<li><code>y</code> synchronize: allow clients to use synchronous I/O with the server.</li>
<li><code>d</code> delete: delete the file/directory. Some servers will allow a delete
  to occur if either this permission is set in the file/directory or if the
  delete-child permission is set in its parent direcory.</li>
<li><code>D</code> delete-child: remove a file or subdirectory from within the given
  directory (directories only)</li>
</ul>
</li>
</ul>
<p></small></p>
<p>A comprehensive listing of allowable field strings is given in the manual page
<a href="http://linux.die.net/man/5/nfs4_acl">nfs4_acl(5)</a></p>
<p>To see what permissions are set on a particular file, use the <code>nfs4_getfacl</code>
command. For example, newly created <code>file1</code> may have default permissions listed
by <code>ls -l</code> as <code>-rw-r—r—</code>. Listing the permissions with <code>nfs4_getfacl</code> would
display the following:</p>
<div class="codehilite"><pre><span></span>$ nfs4_getfacl file1
A::OWNER@:rwatTnNcCoy
A:g:GROUP@:rtncy
A::EVERYONE@:rtncy
</pre></div>

<p>To set permissions on a file, use the <code>nfs4_setfacl</code> command. For convenience,
NFSv4 provides the shortcuts <code>R</code>, <code>W</code> and <code>X</code> for setting read, write, and
execute permissions. For example, to add write permissions for the current
group on <code>file1</code>, use <code>nfs4_setfacl</code> with the <code>-a</code> switch:</p>
<div class="codehilite"><pre><span></span>$ nfs4_setfacl -a A::GROUP@:W file1
</pre></div>

<p>This command switched the <code>GROUP@</code> permission field from <code>rtncy</code> to
<code>rwatTnNcCoy</code>.  However, be aware that NFSv4 file permission shortcuts have a
different meanings than the traditional Unix <code>r</code>, <code>w</code>, and <code>x</code>. For example
issuing <code>chmod g+w file1</code> will set <code>GROUP@</code> to <code>rwatncy</code>.</p>
<p>Although the shortcut permissions can be handy, often rules need to be more
customized. Use <code>nfs4_setfacl -e file1</code>  to open the ACL for <code>file1</code> in a text
editor.</p>
<p>Access Control Entries allow more fine grained control over file and directory
permissions than does the <code>chmod</code> command. For example, if user <code>joe</code> wants to
give read and write permissions to <code>jack</code> for her directory <code>private</code>, she
would issue:</p>
<div class="codehilite"><pre><span></span>$ nfs4_setfacl -R -a A::jack@sherlock:RW private/
</pre></div>

<p>The <code>-R</code> switch recursively applies the rule to the files and directories
within <code>private/</code> as well.</p>
<p>To allow <code>jack</code> to create files and subdirectories within <code>private/</code> with the
permissions as granted above, inheritance rules need to be applied.</p>
<div class="codehilite"><pre><span></span>$ nfs4_setfacl -R -a A:fdi:jack@sherlock:RW private/
</pre></div>

<p>By default, each permission is in the Deny state and an ACE is required to
explicitly allow a permission. However, be aware that a server may silently
override a users ACE, usually to a less permissive setting.</p>
<p>For complete documentation and examples on using NFSv4 ACLs, please see the
manual page at <a href="http://linux.die.net/man/5/nfs4_acl">nfs4_acl(5)</a>.</p>
<h2 id="sharing-data-outside-of-sherlock">Sharing data outside of Sherlock<a class="headerlink" href="#sharing-data-outside-of-sherlock" title="Permanent link">#</a></h2>
<p>If you'd like to share data stored on Sherlock with external collaborators,
there are two possiblities:</p>
<ol>
<li>
<p><a href="https://uit.stanford.edu/service/sponsorship">sponsor a SUNet ID</a><sup id="fnref:sunet_level"><a class="footnote-ref" href="#fn:sunet_level">1</a></sup> for these
     collaborators, and <a href="mailto:srcc-support@stanford.edu">contact us</a> us to create a account for
     them on Sherlock.  This will grant them access to your resources on
     Sherlock (compute as well as storage) and give them access to your group
     shared files, like any other user in your group.</p>
</li>
<li>
<p>if you don't want to grant full access to your Sherlock resources to your
     external collaborators, you can use the <a href="https://www.globus.org/data-sharing">Globus data
     sharing</a> feature. This won't require your
     collaborators to get Stanford accounts, and will allow easy sharing of
     the datasets of your choice.</p>
<div class="admonition warning">
<p class="admonition-title">Globus Sharing is only available through the Oak endpoint</p>
<p>Globus Sharing is only available on <a href="/storage/filesystems/#oak"><code>$OAK</code></a>, using the <a href="https://srcc.stanford.edu/private/oak-gateways">Oak
Globus Endpoint</a> (<code>srcc#oak</code>).</p>
</div>
<p>For complete details about sharing data wih Globus, please see the Globus
 documentation at <a href="https://docs.globus.org/how-to/share-files/">https://docs.globus.org/how-to/share-files/</a></p>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:sunet_level">
<p>a base-level SUNet ID (free) is sufficient to get an
                account on Sherlock. For more details about SUNet ID levels
                and associated services, please see the <a href="https://uit.stanford.edu/service/accounts/sunetids#services">Stanford UIT SUNet
                IDs page</a>.&#160;<a class="footnote-backref" href="#fnref:sunet_level" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../filesystems/" title="Filesystems" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Previous</span>Filesystems</span></div></a><a href="../data-protection/" title="Data protection" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Next</span>Data protection</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright"><div class="md-footer-copyright__highlight">Copyright &copy; 2014 - 2018 &mdash; <a href='mailto:srcc-support@stanford.edu'>Stanford Research Computing Center</a></div> Made with <i class="fa fa-heart md-highlight"></i> in <span class="md-footer-copyright__highlight"><a href='https://www.google.com/maps/place/Stanford,+CA'>Stanford, California</a> </span></div><div class="md-footer-social"><link rel="stylesheet" href="../../../assets/fonts/font-awesome.css"> <a href="https://srcc.stanford.edu" class="md-footer-social__link fa fa-globe"></a>  <a href="https://github.com/stanford-rc" class="md-footer-social__link fa fa-github"></a>  <a href="https://twitter.com/StanfordCompute" class="md-footer-social__link fa fa-twitter"></a>  <a href="https://www.linkedin.com/school/1792/" class="md-footer-social__link fa fa-linkedin"></a> </div></div></div></footer></div><script src="../../../assets/javascripts/application.9e29383c.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script><script src="../../.."></script><script src="../../../search/main.js"></script></body></html>