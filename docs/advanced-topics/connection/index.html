 <!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="Sherlock Cluster documentation"><link rel="canonical" href="https://www.sherlock.stanford.edu/docs/advanced-topics/connection/"><meta name="author" content="Kilian Cavalotti"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\_\-\.]+"><link rel="shortcut icon" href="../../../img/logo_small.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>Connection - Sherlock</title><link rel="stylesheet" href="../../../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../../../assets/stylesheets/application-palette.fe74ad26.css"><meta name="theme-color" content=""><script src="../../../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=swap"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../../../assets/fonts/material-icons.css"><link rel="manifest" href="../../../manifest.webmanifest"><link rel="stylesheet" href="../../.."><script>window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-68034405-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body dir="ltr" data-md-color-primary="stanford" data-md-color-accent="stanford"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#advanced-connection-options" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://www.sherlock.stanford.edu/" title="Sherlock" class="md-header-nav__button md-logo"><img src="../../../img/logo_small.png" width="24" height="24"></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">Sherlock</span><span class="md-header-nav__topic">Connection</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/stanford-rc/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">SRCC <i class="fa fa-heart-o"></i> Open Source</div></a></div></div></div></nav></header><div class="md-container"><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://www.sherlock.stanford.edu/" title="Sherlock" class="md-nav__button md-logo"><img src="../../../img/logo_small.png" width="48" height="48"></a>Sherlock</label><div class="md-nav__source"><a href="https://github.com/stanford-rc/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">SRCC <i class="fa fa-heart-o"></i> Open Source</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1"><label class="md-nav__link" for="nav-1">Overview</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-1">Overview</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../overview/introduction/" title="Introduction" class="md-nav__link">Introduction</a></li><li class="md-nav__item"><a href="../../overview/concepts/" title="Concepts" class="md-nav__link">Concepts</a></li><li class="md-nav__item"><a href="../../overview/glossary/" title="Glossary" class="md-nav__link">Glossary</a></li><li class="md-nav__item"><a href="../../overview/specs/" title="Tech specs" class="md-nav__link">Tech specs</a></li><li class="md-nav__item"><a href="../../overview/status/" title="Status" class="md-nav__link">Status</a></li><li class="md-nav__item"><a href="../../overview/about/" title="About" class="md-nav__link">About</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2"><label class="md-nav__link" for="nav-2">Getting Started</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">Getting Started</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../getting-started/prerequisites/" title="Prerequisites" class="md-nav__link">Prerequisites</a></li><li class="md-nav__item"><a href="../../getting-started/connecting/" title="Connecting" class="md-nav__link">Connecting</a></li><li class="md-nav__item"><a href="../../getting-started/submitting/" title="Submitting jobs" class="md-nav__link">Submitting jobs</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"><label class="md-nav__link" for="nav-3">User guide</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">User guide</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../user-guide/running-jobs/" title="Running jobs" class="md-nav__link">Running jobs</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2"><label class="md-nav__link" for="nav-3-2">Specialized resources</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-3-2">Specialized resources</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../user-guide/gpu/" title="GPU nodes" class="md-nav__link">GPU nodes</a></li></ul></nav></li><li class="md-nav__item"><a href="../../user-guide/ondemand/" title="OnDemand" class="md-nav__link">OnDemand</a></li><li class="md-nav__item"><a href="../../user-guide/troubleshoot/" title="Troubleshooting" class="md-nav__link">Troubleshooting</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"><label class="md-nav__link" for="nav-4">Storage</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">Storage</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../storage/overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../../storage/filesystems/" title="Filesystems" class="md-nav__link">Filesystems</a></li><li class="md-nav__item"><a href="../../storage/data-sharing/" title="Data sharing" class="md-nav__link">Data sharing</a></li><li class="md-nav__item"><a href="../../storage/data-protection/" title="Data protection" class="md-nav__link">Data protection</a></li><li class="md-nav__item"><a href="../../storage/data-transfer/" title="Data transfer" class="md-nav__link">Data transfer</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5"><label class="md-nav__link" for="nav-5">Software</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">Software</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../software/overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../../software/list/" title="List" class="md-nav__link">List</a></li><li class="md-nav__item"><a href="../../software/modules/" title="Modules" class="md-nav__link">Modules</a></li><li class="md-nav__item"><a href="../../software/install/" title="Installation" class="md-nav__link">Installation</a></li><li class="md-nav__item"><a href="../../software/containers/" title="Containers" class="md-nav__link">Containers</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6" type="checkbox" id="nav-5-6"><label class="md-nav__link" for="nav-5-6">Usage</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-5-6">Usage</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../software/using/R/" title="R" class="md-nav__link">R</a></li><li class="md-nav__item"><a href="../../software/using/julia/" title="Julia" class="md-nav__link">Julia</a></li><li class="md-nav__item"><a href="../../software/using/python/" title="Python" class="md-nav__link">Python</a></li><li class="md-nav__item"><a href="../../software/using/perl/" title="Perl" class="md-nav__link">Perl</a></li><li class="md-nav__item"><a href="../../software/using/spark/" title="Spark" class="md-nav__link">Spark</a></li><li class="md-nav__item"><a href="../../software/using/mariadb/" title="MariaDB" class="md-nav__link">MariaDB</a></li><li class="md-nav__item"><a href="../../software/using/postgresql/" title="PostgreSQL" class="md-nav__link">PostgreSQL</a></li><li class="md-nav__item"><a href="../../software/using/singularity/" title="Singularity" class="md-nav__link">Singularity</a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked><label class="md-nav__link" for="nav-6">Advanced topics</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">Advanced topics</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">Connection</label><a href="./" title="Connection" class="md-nav__link md-nav__link--active">Connection</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#login-nodes" title="Login nodes" class="md-nav__link">Login nodes</a></li><li class="md-nav__item"><a href="#authentication-methods" title="Authentication methods" class="md-nav__link">Authentication methods</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#password-recommended" title="Password (recommended)" class="md-nav__link">Password (recommended)</a></li><li class="md-nav__item"><a href="#gssapi" title="GSSAPI" class="md-nav__link">GSSAPI</a></li></ul></nav></li><li class="md-nav__item"><a href="#ssh-options" title="SSH options" class="md-nav__link">SSH options</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#avoiding-multiple-duo-prompts" title="Avoiding multiple Duo prompts" class="md-nav__link">Avoiding multiple Duo prompts</a></li></ul></nav></li><li class="md-nav__item"><a href="#connecting-from-abroad" title="Connecting from abroad" class="md-nav__link">Connecting from abroad</a></li></ul></nav></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#login-nodes" title="Login nodes" class="md-nav__link">Login nodes</a></li><li class="md-nav__item"><a href="#authentication-methods" title="Authentication methods" class="md-nav__link">Authentication methods</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#password-recommended" title="Password (recommended)" class="md-nav__link">Password (recommended)</a></li><li class="md-nav__item"><a href="#gssapi" title="GSSAPI" class="md-nav__link">GSSAPI</a></li></ul></nav></li><li class="md-nav__item"><a href="#ssh-options" title="SSH options" class="md-nav__link">SSH options</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#avoiding-multiple-duo-prompts" title="Avoiding multiple Duo prompts" class="md-nav__link">Avoiding multiple Duo prompts</a></li></ul></nav></li><li class="md-nav__item"><a href="#connecting-from-abroad" title="Connecting from abroad" class="md-nav__link">Connecting from abroad</a></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/stanford-rc/www.sherlock.stanford.edu/edit/docs/src/docs/advanced-topics/connection.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a><h1 id="advanced-connection-options">Advanced connection options<a class="headerlink" href="#advanced-connection-options" title="Permanent link">#</a></h1>
<h2 id="login-nodes">Login nodes<a class="headerlink" href="#login-nodes" title="Permanent link">#</a></h2>
<p>Sherlock login nodes are regrouped behind a single DNS alias:
<code>login.sherlock.stanford.edu</code>.</p>
<p>This alias provides a load-balanced login environment, and the assurance that
you will be connected to the least loaded login node when you connect to
Sherlock.</p>
<p>If for any reason, you want to directly connect to a specific login node
and bypass the automatic load-balanced dispatching of new connections
(which we don't recommend), you can use that login node's hostname
explicitly. For instance:</p>
<div class="codehilite"><pre><span></span>$ ssh &lt;sunetid&gt;@ln01.sherlock.stanford.edu
</pre></div>

<p>This can be useful if you run long-standing processes on the login nodes, such
as <a href="https://www.gnu.org/software/screen">screen</a> or <a href="https://github.com/tmux/tmux/wiki">tmux</a> sessions. To find them back when you
reconnect to Sherlock, you will indeed need to login to the same login node you
started them on.</p>
<p>The drawback is that by connecting to a specific login node, you will forfeit
the load-balancing benefits, which could result in a crowded environment, or
even in login errors in case that specific login node is unavailable.</p>
<h2 id="authentication-methods">Authentication methods<a class="headerlink" href="#authentication-methods" title="Permanent link">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Public-key authentication</p>
<p>SSH public-key authentication is <strong>not</strong> supported on Sherlock.</p>
</div>
<h3 id="password-recommended">Password <small>(recommended)</small><a class="headerlink" href="#password-recommended" title="Permanent link">#</a></h3>
<p>The recommended way to authenticate to Sherlock is to simply use your SUNet ID
and password, as described in the <a href="/docs/getting-started/connecting/#authentication">Connecting</a> page.</p>
<p>Passwords are not stored on Sherlock. Sherlock login nodes will delegate
password authentication to the <a href="https://uit.stanford.edu/service/kerberos">University central Kerberos
service</a>.</p>
<h3 id="gssapi">GSSAPI<a class="headerlink" href="#gssapi" title="Permanent link">#</a></h3>
<p>For compatibility with previous generations of Sherlock, GSSAPI<sup id="fnref:gssapi"><a class="footnote-ref" href="#fn:gssapi">1</a></sup>
authentication is still allowed, and could be considered a more convenient
option, as this mechanism doesn't require entering your password for each
connection.</p>
<p>GSSAPI authentication relies on a token system, where users obtain Kerberos
ticket-granting tickets, transmit them via SSH to the server they want to
connect to, which will, in turn, verify their validity. That way, passwords are
never stored locally, and never transit over the network. That's why Kerberos
is usually considered the most secure method to authenticate.</p>
<p>To connect using GSSAPI on Sherlock, you'll need to go through a few
steps<sup id="fnref:os_support"><a class="footnote-ref" href="#fn:os_support">2</a></sup>:</p>
<ol>
<li>
<p>make sure the Kerberos user tools are installed on your local machine.
   You'll need the <code>kinit</code> (and optionally <code>klist</code> and <code>kdestroy</code>) utilities.
   Please refer to your OS documentation to install them if required.</p>
</li>
<li>
<p>download and install the Stanford <code>krb5.conf</code> file, which contains
   information about the Stanford Kerberos environment:</p>
<div class="codehilite"><pre><span></span>$ sudo curl -o /etc/krb5.conf https://web.stanford.edu/dept/its/support/kerberos/dist/krb5.conf
</pre></div>

</li>
<li>
<p>configure your SSH client, by modifying (or creating if it doesn't
   exist already) the <code>.ssh/config</code> file in your home directory on your local
   machine. Using a text editor, you can add the following lines to your
   <code>~/.ssh/config</code> file (indentation is important):</p>
<div class="codehilite"><pre><span></span>Host login.sherlock.stanford.edu
    GSSAPIDelegateCredentials yes
    GSSAPIAuthentication yes
</pre></div>

</li>
</ol>
<p>Once everything is in place (you only need to do this once), you'll be able to
test that your Kerberos installation works by running <code>kinit
&lt;sunetid&gt;@stanford.edu</code>. You should get a password prompt, and upon success,
you'll be able to list your Kerberos credentials with the <code>klist</code> command:</p>
<div class="codehilite"><pre><span></span>$ kinit kilian@stanford.edu
Password for kilian@stanford.edu:
$ klist
Ticket cache: FILE:/tmp/krb5cc_215845_n4S4I6KgyM
Default principal: kilian@stanford.edu

Valid starting     Expires            Service principal
07/28/17 17:33:54  07/29/17 18:33:32  krbtgt/stanford.edu@stanford.edu
        renew until 08/04/17 17:33:32
</pre></div>

<div class="admonition important">
<p class="admonition-title">Kerberos ticket expiration</p>
<p>Kerberos tickets have a 25-hour lifetime. So you'll need to run the <code>kinit</code>
command pretty much once a day to continue being able to authenticate to
Sherlock.</p>
</div>
<p>Please note that when your Kerberos ticket expire, existing Sherlock
connections will <em>not</em> be interrupted. So you'll be able to keep connections
open to Sherlock for several days without any issue.</p>
<p>You're now ready to connect to Sherlock using GSSAPI. Simply SSH as usual:</p>
<div class="codehilite"><pre><span></span>$ ssh &lt;sunetid&gt;@login.sherlock.stanford.edu
</pre></div>

<p>and if everything goes well, you should directly see the two-factor (Duo)
prompt, without having to enter your password.</p>
<p>If you want to destroy your Kerberos ticket before its expiration, you can use
the <code>kdestroy</code> command.</p>
<h2 id="ssh-options">SSH options<a class="headerlink" href="#ssh-options" title="Permanent link">#</a></h2>
<p>OpenSSH offers a variety of configuration options that you can use in
<code>~/.ssh/config</code> on your local computer. The following section describe some of
the options you can use with Sherlock that may make connecting and transferring
files more convenient.</p>
<h3 id="avoiding-multiple-duo-prompts">Avoiding multiple Duo prompts<a class="headerlink" href="#avoiding-multiple-duo-prompts" title="Permanent link">#</a></h3>
<p>In order to avoid getting a second-factor (Duo) prompt every time you want to
open a new connection to Sherlock, you can take advantage of the multiplexing
features provided by OpenSSH.</p>
<p>Simply add the following lines to your <code>~/.ssh/config</code> file on your local
machine to activate the <code>ControlMaster</code> option. If you already have a <code>Host
login.sherlock.stanford.edu</code> block in your configuration file, simply add the
<code>Control*</code> option lines in the same block.</p>
<div class="codehilite"><pre><span></span>Host login.sherlock.stanford.edu
    ControlMaster auto
    ControlPersist yes
    ControlPath ~/.ssh/%l%r@%h:%p
</pre></div>

<p>It will allow SSH to re-use an existing connection to Sherlock each time you
open a new session (create a new SSH connection), thus avoiding subsequent 2FA
prompts once the initial connection is established.</p>
<p>The slight disadvantage of this approach is that once you have a connection
open to one of Sherlock's login nodes, all your subsequent connections will be
using the same login node. This will somewhat defeat the purpose of the load-balancing mechanism
used by the login nodes.</p>
<div class="admonition tip">
<p class="admonition-title">Connection failure with <code>unix_listener</code> error</p>
<p>If your connection fails with the following error message:
<div class="codehilite"><pre><span></span>unix_listener: &quot;...&quot; too long for Unix domain socket
</pre></div>
you're being hit by a macOS limitation, and you should replace the
<code>ControlPath</code> line above by:
<div class="codehilite"><pre><span></span>ControlPath ~/.ssh/%C
</pre></div></p>
</div>
<h2 id="connecting-from-abroad">Connecting from abroad<a class="headerlink" href="#connecting-from-abroad" title="Permanent link">#</a></h2>
<div class="admonition tip">
<p class="admonition-title">VPN</p>
<p>As a good security practice, we always recommend to use the <a href="https://uit.stanford.edu/service/vpn">Stanford
VPN</a> when connecting from untrusted networks.</p>
</div>
<p>Access to Sherlock is not restricted to campus, meaning that you can connect to
Sherlock from pretty much anywhere, including when traveling abroad.  We don't
restrict inbound SSH connections to any specific IP address range or
geographical location, so you shouldn't have any issue to reach the login nodes
from anywhere.</p>
<p>Regarding two-step authentication, University IT provides <a href="https://uit.stanford.edu/service/webauth/twostep">alternate
authentication options</a> when phone service or Duo Mobile push
notifications are not available.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:gssapi">
<p>The Generic Security Service Application Program Interface (GSSAPI,
  also GSS-API) is an application programming interface for programs to access
  security services. It allows program to interact with security services such
  as Kerberos for user authentication.&#160;<a class="footnote-backref" href="#fnref:gssapi" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:os_support">
<p>Those instructions should work on Linux <i class="fa fa-linux"></i> and MacOs
  <i class="fa fa-apple"></i> computers. For Windows <i class="fa fa-windows"></i>, we recommend using the WSL,
  as described in the <a href="/docs/getting-started/prerequisites/#windows">Prerequisites</a> page.&#160;<a class="footnote-backref" href="#fnref:os_support" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../../software/using/singularity/" title="Singularity" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Previous</span>Singularity</span></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright"><div class="md-footer-copyright__highlight">Copyright &copy; 2014 - 2018 &mdash; <a href='mailto:srcc-support@stanford.edu'>Stanford Research Computing Center</a></div> Made with <i class="fa fa-heart md-highlight"></i> in <span class="md-footer-copyright__highlight"><a href='https://www.google.com/maps/place/Stanford,+CA'>Stanford, California</a> </span></div><div class="md-footer-social"><link rel="stylesheet" href="../../../assets/fonts/font-awesome.css"> <a href="https://srcc.stanford.edu" class="md-footer-social__link fa fa-globe"></a>  <a href="https://github.com/stanford-rc" class="md-footer-social__link fa fa-github"></a>  <a href="https://twitter.com/StanfordCompute" class="md-footer-social__link fa fa-twitter"></a>  <a href="https://www.linkedin.com/school/1792/" class="md-footer-social__link fa fa-linkedin"></a> </div></div></div></footer></div><script src="../../../assets/javascripts/application.9e29383c.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script><script src="../../.."></script><script src="../../../search/main.js"></script></body></html>